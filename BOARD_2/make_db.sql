
-- 데이터베이스 생성
CREATE DATABASE board_login2

USE board_login2

-- 게시판 테이블 생성
CREATE TABLE board (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(20) NOT NULL,
    password VARCHAR(20) NOT NULL,
    subject VARCHAR(20) NOT NULL,
    content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)

ALTER TABLE board ADD COLUMN file VARCHAR(255) NULL

ALTER TABLE board ADD COLUMN saved_file VARCHAR(255) NULL

ALTER TABLE board DROP COLUMN file_name

-- 댓글 테이블 생성
CREATE TABLE comments (
    id INT AUTO_INCREMENT PRIMARY KEY,
    post_id INT NOT NULL,  -- 어떤 게시글의 댓글인지 저장
    parent_id INT DEFAULT NULL,  -- 대댓글인 경우 부모 댓글 ID
    name VARCHAR(50) NOT NULL,
    password VARCHAR(255) NOT NULL,  -- 비밀번호 저장 (삭제 시 필요)
    content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (post_id) REFERENCES board(id) ON DELETE CASCADE,
    FOREIGN KEY (parent_id) REFERENCES comments(id) ON DELETE CASCADE
);

-- 테스트 게시글
INSERT INTO board (subject, content, name) VALUES
('테스트 제목 1', '테스트 내용 1입니다.', '사용자1'),
('테스트 제목 2', '테스트 내용 2입니다.', '사용자2'),
('테스트 제목 3', '테스트 내용 3입니다.', '사용자3'),
('테스트 제목 4', '테스트 내용 4입니다.', '사용자4'),
('테스트 제목 5', '테스트 내용 5입니다.', '사용자5'),
('테스트 제목 6', '테스트 내용 6입니다.', '사용자6'),
('테스트 제목 7', '테스트 내용 7입니다.', '사용자7'),
('테스트 제목 8', '테스트 내용 8입니다.', '사용자8'),
('테스트 제목 9', '테스트 내용 9입니다.', '사용자9'),
('테스트 제목 10', '테스트 내용 10입니다.', '사용자10'),
('테스트 제목 11', '테스트 내용 11입니다.', '사용자11'),
('테스트 제목 12', '테스트 내용 12입니다.', '사용자12'),
('테스트 제목 13', '테스트 내용 13입니다.', '사용자13'),
('테스트 제목 14', '테스트 내용 14입니다.', '사용자14'),
('테스트 제목 15', '테스트 내용 15입니다.', '사용자15'),
('테스트 제목 16', '테스트 내용 16입니다.', '사용자16'),
('테스트 제목 17', '테스트 내용 17입니다.', '사용자17'),
('테스트 제목 18', '테스트 내용 18입니다.', '사용자18'),
('테스트 제목 19', '테스트 내용 19입니다.', '사용자19'),
('테스트 제목 20', '테스트 내용 20입니다.', '사용자20'),
('테스트 제목 21', '테스트 내용 21입니다.', '사용자21'),
('테스트 제목 22', '테스트 내용 22입니다.', '사용자22'),
('테스트 제목 23', '테스트 내용 23입니다.', '사용자23'),
('테스트 제목 24', '테스트 내용 24입니다.', '사용자24'),
('테스트 제목 25', '테스트 내용 25입니다.', '사용자25'),
('테스트 제목 26', '테스트 내용 26입니다.', '사용자26'),
('테스트 제목 27', '테스트 내용 27입니다.', '사용자27'),
('테스트 제목 28', '테스트 내용 28입니다.', '사용자28'),
('테스트 제목 29', '테스트 내용 29입니다.', '사용자29'),
('테스트 제목 30', '테스트 내용 30입니다.', '사용자30'),
('테스트 제목 31', '테스트 내용 31입니다.', '사용자31'),
('테스트 제목 32', '테스트 내용 32입니다.', '사용자32'),
('테스트 제목 33', '테스트 내용 33입니다.', '사용자33'),
('테스트 제목 34', '테스트 내용 34입니다.', '사용자34'),
('테스트 제목 35', '테스트 내용 35입니다.', '사용자35'),
('테스트 제목 36', '테스트 내용 36입니다.', '사용자36'),
('테스트 제목 37', '테스트 내용 37입니다.', '사용자37'),
('테스트 제목 38', '테스트 내용 38입니다.', '사용자38'),
('테스트 제목 39', '테스트 내용 39입니다.', '사용자39'),
('테스트 제목 40', '테스트 내용 40입니다.', '사용자40'),
('테스트 제목 41', '테스트 내용 41입니다.', '사용자41'),
('테스트 제목 42', '테스트 내용 42입니다.', '사용자42'),
('테스트 제목 43', '테스트 내용 43입니다.', '사용자43'),
('테스트 제목 44', '테스트 내용 44입니다.', '사용자44'),
('테스트 제목 45', '테스트 내용 45입니다.', '사용자45'),
('테스트 제목 46', '테스트 내용 46입니다.', '사용자46'),
('테스트 제목 47', '테스트 내용 47입니다.', '사용자47'),
('테스트 제목 48', '테스트 내용 48입니다.', '사용자48'),
('테스트 제목 49', '테스트 내용 49입니다.', '사용자49'),
('테스트 제목 50', '테스트 내용 50입니다.', '사용자50');